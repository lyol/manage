(function(e){var i={data:{key:{isHidden:"isHidden"}}};var t=function(e,i,t,d,o,n,s){var r=c.isHidden(e,t);c.isHidden(e,t,r);c.initHideForExCheck(e,t)},d=function(e,i,t){},o=function(o,n){n.showNodes=function(e,i){N.showNodes(o,e,i)};n.showNode=function(e,i){if(!e){return}N.showNodes(o,[e],i)};n.hideNodes=function(e,i){N.hideNodes(o,e,i)};n.hideNode=function(e,i){if(!e){return}N.hideNodes(o,[e],i)};var s=n.checkNode;if(s){n.checkNode=function(e,i,t,d){if(!!e&&!!c.isHidden(o,e)){return}s.apply(n,arguments)}}},n={initHideForExCheck:function(e,i){var t=c.isHidden(e,i);if(t&&e.check&&e.check.enable){if(typeof i._nocheck=="undefined"){i._nocheck=!!i.nocheck;i.nocheck=true}i.check_Child_State=-1;if(N.repairParentChkClassWithSelf){N.repairParentChkClassWithSelf(e,i)}}},initShowForExCheck:function(e,i){var t=c.isHidden(e,i);if(!t&&e.check&&e.check.enable){if(typeof i._nocheck!="undefined"){i.nocheck=i._nocheck;delete i._nocheck}if(N.setChkClass){var d=u(i,l.id.CHECK,e);N.setChkClass(e,d,i)}if(N.repairParentChkClassWithSelf){N.repairParentChkClassWithSelf(e,i)}}}},s={clearOldFirstNode:function(e,i){var t=i.getNextNode();while(!!t){if(t.isFirstNode){t.isFirstNode=false;N.setNodeLineIcos(e,t);break}if(t.isLastNode){break}t=t.getNextNode()}},clearOldLastNode:function(e,i,t){var d=i.getPreNode();while(!!d){if(d.isLastNode){d.isLastNode=false;if(t){N.setNodeLineIcos(e,d)}break}if(d.isFirstNode){break}d=d.getPreNode()}},makeDOMNodeMainBefore:function(e,i,t){var d=c.isHidden(i,t);e.push("<li ",d?"style='display:none;' ":"","id='",t.tId,"' class='",l.className.LEVEL,t.level,"' tabindex='0' hidefocus='true' treenode>")},showNode:function(e,i,t){c.isHidden(e,i,false);c.initShowForExCheck(e,i);u(i,e).show()},showNodes:function(e,i,t){if(!i||i.length==0){return}var d={},o,n;for(o=0,n=i.length;o<n;o++){var s=i[o];if(!d[s.parentTId]){var r=s.getParentNode();d[s.parentTId]=r===null?c.getRoot(e):s.getParentNode()}N.showNode(e,s,t)}for(var a in d){var f=c.nodeChildren(e,d[a]);N.setFirstNodeForShow(e,f);N.setLastNodeForShow(e,f)}},hideNode:function(e,i,t){c.isHidden(e,i,true);i.isFirstNode=false;i.isLastNode=false;c.initHideForExCheck(e,i);N.cancelPreSelectedNode(e,i);u(i,e).hide()},hideNodes:function(e,i,t){if(!i||i.length==0){return}var d={},o,n;for(o=0,n=i.length;o<n;o++){var s=i[o];if((s.isFirstNode||s.isLastNode)&&!d[s.parentTId]){var r=s.getParentNode();d[s.parentTId]=r===null?c.getRoot(e):s.getParentNode()}N.hideNode(e,s,t)}for(var a in d){var f=c.nodeChildren(e,d[a]);N.setFirstNodeForHide(e,f);N.setLastNodeForHide(e,f)}},setFirstNode:function(e,i){var t=c.nodeChildren(e,i);var d=c.isHidden(e,t[0],false);if(t.length>0&&!d){t[0].isFirstNode=true}else if(t.length>0){N.setFirstNodeForHide(e,t)}},setLastNode:function(e,i){var t=c.nodeChildren(e,i);var d=c.isHidden(e,t[0]);if(t.length>0&&!d){t[t.length-1].isLastNode=true}else if(t.length>0){N.setLastNodeForHide(e,t)}},setFirstNodeForHide:function(e,i){var t,d,o;for(d=0,o=i.length;d<o;d++){t=i[d];if(t.isFirstNode){break}var n=c.isHidden(e,t);if(!n&&!t.isFirstNode){t.isFirstNode=true;N.setNodeLineIcos(e,t);break}else{t=null}}return t},setFirstNodeForShow:function(e,i){var t,d,o,n,s;for(d=0,o=i.length;d<o;d++){t=i[d];var r=c.isHidden(e,t);if(!n&&!r&&t.isFirstNode){n=t;break}else if(!n&&!r&&!t.isFirstNode){t.isFirstNode=true;n=t;N.setNodeLineIcos(e,t)}else if(n&&t.isFirstNode){t.isFirstNode=false;s=t;N.setNodeLineIcos(e,t);break}else{t=null}}return{new:n,old:s}},setLastNodeForHide:function(e,i){var t,d;for(d=i.length-1;d>=0;d--){t=i[d];if(t.isLastNode){break}var o=c.isHidden(e,t);if(!o&&!t.isLastNode){t.isLastNode=true;N.setNodeLineIcos(e,t);break}else{t=null}}return t},setLastNodeForShow:function(e,i){var t,d,o,n,s;for(d=i.length-1;d>=0;d--){t=i[d];var r=c.isHidden(e,t);if(!n&&!r&&t.isLastNode){n=t;break}else if(!n&&!r&&!t.isLastNode){t.isLastNode=true;n=t;N.setNodeLineIcos(e,t)}else if(n&&t.isLastNode){t.isLastNode=false;s=t;N.setNodeLineIcos(e,t);break}else{t=null}}return{new:n,old:s}}},r={view:s,data:n};e.extend(true,e.fn.zTree._z,r);var a=e.fn.zTree,f=a._z.tools,l=a.consts,N=a._z.view,c=a._z.data,h=a._z.event,u=f.$;c.isHidden=function(e,i,t){if(!i){return false}var d=e.data.key.isHidden;if(typeof t!=="undefined"){if(typeof t==="string"){t=f.eqs(checked,"true")}t=!!t;i[d]=t}return i[d]};c.exSetting(i);c.addInitNode(t);c.addBeforeA(d);c.addZTreeTools(o);var k=c.initNode;c.initNode=function(e,i,t,d,o,n,s){var r=d?d:c.getRoot(e),a=r[e.data.key.children];c.tmpHideFirstNode=N.setFirstNodeForHide(e,a);c.tmpHideLastNode=N.setLastNodeForHide(e,a);if(s){N.setNodeLineIcos(e,c.tmpHideFirstNode);N.setNodeLineIcos(e,c.tmpHideLastNode)}o=c.tmpHideFirstNode===t;n=c.tmpHideLastNode===t;if(k)k.apply(c,arguments);if(s&&n){N.clearOldLastNode(e,t,s)}};var v=c.makeChkFlag;if(!!v){c.makeChkFlag=function(e,i){if(!!i&&!!c.isHidden(e,i)){return}v.apply(c,arguments)}}var F=c.getTreeCheckedNodes;if(!!F){c.getTreeCheckedNodes=function(e,i,t,d){if(!!i&&i.length>0){var o=i[0].getParentNode();if(!!o&&!!c.isHidden(e,o)){return[]}}return F.apply(c,arguments)}}var p=c.getTreeChangeCheckedNodes;if(!!p){c.getTreeChangeCheckedNodes=function(e,i,t){if(!!i&&i.length>0){var d=i[0].getParentNode();if(!!d&&!!c.isHidden(e,d)){return[]}}return p.apply(c,arguments)}}var H=N.expandCollapseSonNode;if(!!H){N.expandCollapseSonNode=function(e,i,t,d,o){if(!!i&&!!c.isHidden(e,i)){return}H.apply(N,arguments)}}var C=N.setSonNodeCheckBox;if(!!C){N.setSonNodeCheckBox=function(e,i,t,d){if(!!i&&!!c.isHidden(e,i)){return}C.apply(N,arguments)}}var g=N.repairParentChkClassWithSelf;if(!!g){N.repairParentChkClassWithSelf=function(e,i){if(!!i&&!!c.isHidden(e,i)){return}g.apply(N,arguments)}}})(jQuery);